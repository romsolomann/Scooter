(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{1258:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/parkings",function(){return n(6834)}])},1775:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(6154);let i=(e,t,n)=>{let i=r.Z.create({baseURL:e});return t&&i.interceptors.request.use(e=>{let t={...e};return t}),i.interceptors.response.use(e=>e,async e=>{let t=await n(e);return await Promise.reject(t)}),i};function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i("http://localhost:3030/api"+e,t,async e=>{var t;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Something went wrong",errorCode:"UNKNOWN"}})}},6834:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(5893),i=n(6886),s=n(3321),a=n(7294),o=n(9226),l=n(2008),c=n(7536),u=n(7848),d=n(8228),x=n(1775);let h=(0,x.s)("/parkings"),m=async()=>await h.get("/"),p=async e=>await h.get("/".concat(e)),g=async e=>await h.post("/",e),j=async e=>await h.put("/".concat(e._id),e),P=async e=>await h.put("/".concat(e)),Z={getParkings:m,getParkingById:p,createParking:g,updateParking:j,removeParking:P},b={useGetParkings:e=>(0,u.a)(["parkings"],Z.getParkings),useCreateParking:e=>(0,d.D)(["parkings"],async e=>await Z.createParking(e),e)};var y=n(5949);function f(){return(0,a.useContext)(y.M)}let k=()=>{let{handleSubmit:e,register:t}=(0,c.cI)(),{closeDialog:n}=f(),{refetch:a}=b.useGetParkings(),{mutate:u}=b.useCreateParking({onSuccess(){a(),n()}});return(0,r.jsx)(o.Z,{p:2,children:(0,r.jsxs)("form",{onSubmit:e(e=>{let t={...e,location:{latitude:+e.location.latitude,longitude:+e.location.longitude}};u(t)}),children:[(0,r.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("address.street.name"),label:"Street Name",type:"text",required:!0})}),(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("address.street.number"),label:"Street Number",type:"number"})}),(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("address.city"),label:"City",type:"text",required:!0})}),(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("numberOfScooters"),label:"Number of Scooters",type:"number",required:!0})}),(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("location.latitude"),label:"Latitude",type:"text",required:!0})}),(0,r.jsx)(i.ZP,{item:!0,xs:4,children:(0,r.jsx)(l.Z,{...t("location.longitude"),label:"Longitude",type:"text",required:!0})})]}),(0,r.jsx)(s.Z,{type:"submit",variant:"contained",color:"primary",sx:{mt:2},children:"Create Parking"})]})})};var w=n(8456),v=n(5861),_=n(1752),S=n.n(_),N=n(1108);let C={longitude:34.855499,latitude:32.109333,zoom:12},{publicRuntimeConfig:E}=S()(),O=E.MAPBOX_ACCESS_TOKEN_KEY;var q=e=>{let{children:t}=e;return(0,r.jsx)(o.Z,{sx:{width:"100%"},children:(0,r.jsx)(N.D5,{mapboxAccessToken:O,initialViewState:C,style:{width:"100%",height:400},mapStyle:"mapbox://styles/mapbox/streets-v9",children:t})})},A=()=>{let{isLoading:e,data:t}=b.useGetParkings();return(0,r.jsx)(o.Z,{children:e?(0,r.jsx)(w.Z,{}):(0,r.jsxs)(o.Z,{width:"100%",children:[(0,r.jsx)(v.Z,{variant:"h5",my:2,children:"Parking Spots"}),(0,r.jsx)(q,{children:null==t?void 0:t.data.map(e=>(0,r.jsx)(N.GI,{longitude:e.location.longitude,latitude:e.location.latitude,anchor:"bottom",closeButton:!1,className:"custom-popup",children:(0,r.jsxs)(v.Z,{variant:"subtitle2",fontWeight:"bold",children:["Amount of Scooter's Parking: ",e.numberOfScooters]})},e._id))})]})})},G=()=>{let{openDialog:e}=f();return(0,r.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(i.ZP,{item:!0,xs:12,children:(0,r.jsx)(s.Z,{variant:"contained",onClick:()=>{e(k,{DialogProps:{maxWidth:"sm",fullScreen:!1}})},children:"Add new Parking Location"})}),(0,r.jsx)(i.ZP,{item:!0,xs:12,children:(0,r.jsx)(A,{})})]})}}},function(e){e.O(0,[573,417,774,888,179],function(){return e(e.s=1258)}),_N_E=e.O()}]);