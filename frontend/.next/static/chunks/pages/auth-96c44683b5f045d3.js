(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2304:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return i(420)}])},1775:function(e,t,i){"use strict";i.d(t,{s:function(){return r}});var s=i(6154);let n=(e,t,i)=>{let n=s.Z.create({baseURL:e});return t&&n.interceptors.request.use(e=>{let t={...e};return t}),n.interceptors.response.use(e=>e,async e=>{let t=await i(e);return await Promise.reject(t)}),n};function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n("http://localhost:3030/api"+e,t,async e=>{var t;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Something went wrong",errorCode:"UNKNOWN"}})}},420:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return W}});var s,n,r=i(5893),l=i(9226),a=i(3321),u=i(7036),o=i(7294),c=i(5861),d=i(6886),h=i(2008),x=i(8377),p=i(1163),m=i(7536),g=i(1775);let j=(0,g.s)("/auth"),Z=async e=>await j.post("/signup",e),f=async e=>await j.post("/login",e),y=async()=>await j.post("/logout"),w={signup:Z,login:f,logout:y};var N=i(8228);let P={useLogin:e=>(0,N.D)(["login"],async e=>await w.login(e),e),useSignUp:e=>(0,N.D)(["signup"],async e=>await w.signup(e),e),useLogout:e=>(0,N.D)(["logout"],async()=>await w.logout(),e)};var b=i(8234),v=i(464),S=i(2449);let I=()=>{let{handleSubmit:e,register:t}=(0,m.cI)(),{setUser:i}=(0,b.a)(),{push:s}=(0,p.useRouter)(),{mutate:n}=P.useLogin({onSuccess(e){let t=e.data.token,n=(0,S.TD)(t);s(v.C.PARKINGS),(0,S.uB)(t),i(n)}});return(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{my:2,variant:"h5",children:"Login"}),(0,r.jsx)("form",{onSubmit:e(e=>{n(e)}),children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("username"),label:"Username",type:"text",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("password"),label:"Password",type:"password",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(a.Z,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"})})]})})]})},L=()=>{let{handleSubmit:e,register:t}=(0,m.cI)(),{setUser:i}=(0,b.a)(),{push:s}=(0,p.useRouter)(),{mutate:n}=P.useSignUp({onSuccess(e){let t=e.data.token,n=(0,S.TD)(t);s(v.C.PARKINGS),(0,S.uB)(t),i(n)}});return(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.Z,{my:2,variant:"h5",children:"Sign up"}),(0,r.jsx)("form",{onSubmit:e(e=>{n(e)}),children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("username"),label:"Username",type:"text",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("firstName"),label:"First name",type:"text",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("lastName"),label:"Last Name",type:"text",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("email"),label:"Email",type:"email",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{...t("password"),label:"Password",type:"password",required:!0,fullWidth:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(a.Z,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Sign up"})})]})})]})};(s=n||(n={})).SIGNUP="signup",s.LOGIN="login";let _=()=>{let[e,t]=(0,o.useState)(n.LOGIN),i=e=>{t(e)};return(0,r.jsxs)(l.Z,{sx:{height:"100vh",width:"100%",backgroundColor:u.Z[400]},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,r.jsx)(l.Z,{maxWidth:350,sx:{backgroundColor:"white",p:2,borderRadius:1},children:e===n.LOGIN?(0,r.jsx)(I,{}):(0,r.jsx)(L,{})}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(a.Z,{onClick:()=>{i(e===n.LOGIN?n.SIGNUP:n.LOGIN)},children:e===n.LOGIN?"Not Signed up yet? register here":"already signed up? login here"})})]})};_.isPublic=!0;var W=_}},function(e){e.O(0,[573,774,888,179],function(){return e(e.s=2304)}),_N_E=e.O()}]);